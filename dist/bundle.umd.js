!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("suika")):"function"==typeof define&&define.amd?define(["exports","suika"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).suikaRouter={},e.suika)}(this,(function(e,t){"use strict";class r extends t.Component{render(){return t.h("div",{},t.h("h1",{},"404"),t.h("p",{},`Page ${this.attrs.currentRoute} not found.`))}}class o extends t.Component{router;constructor(){super(),this.router=null}_setAttrs(e){this.attrs=e,e.router&&(this.router=e.router)}changeHandler(e){this._update()}onMounted(){window.addEventListener("popstate",this.changeHandler.bind(this))}beforeUnmount(){window.removeEventListener("popstate",this.changeHandler.bind(this))}render(){let e,o;if(this.router){const t=this.router.getFragment();o=this.router.getHandler(t),e=this.router.current}else o=r;return t.h(o,{currentRoute:e})}}const n=(e="",t="hash")=>{"history"===t?window.history.pushState(null,"",e):window.location.href=`${window.location.href.replace(/#(.*)$/,"")}#${e}`},s=t.makeMap("history,pushstate");class i{routes;mode;current;constructor(e){this.routes=e.routes,this.mode=e.mode||"hash",this.current=this.getFragment()}getFragment(){let e="";if("history"===this.mode)e=decodeURI(window.location.pathname+window.location.search),e=e.replace(/\?(.*)$/,"");else{const t=window.location.href.match(/#(.*)$/);e=t?t[1]:"/"}return e}getHandler(e=""){const t=this.routes.find((t=>t.regex?.test(e)));return t&&t.component?t.component:r}navigate(e=""){n(e,this.mode)}}e.RouterLink=(e,r)=>{const o=t.fixOptions(e,{onclick:t=>{t.preventDefault(),n(e.to||"/")}});return t.h("a",o,...r)},e.RouterView=o,e.createRouter=e=>(!t.isUndef(e.mode)&&s(e.mode)||(e.mode="hash"),Array.isArray(e.routes)&&(e.routes=e.routes.map((e=>{var t;return e.regex=(t=e.path,new RegExp(`^${t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")}$`)),e}))),new i(e)),e.navigate=n,Object.defineProperty(e,"__esModule",{value:!0})}));
